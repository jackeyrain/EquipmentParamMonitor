@model ProjectArrow.Entity.MES_ProjectArrow

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Project Arrow Job</title>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />

    <script src="~/Scripts/jquery-3.5.1.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <style>
        .grap {
            margin-top: 5px;
        }
    </style>
</head>
<body style="margin:16px">
    <div>
        <div class="alert alert-primary" role="alert">
            ORDER NUMBER <b>@Model.ORDERNUMBER</b> <br />
            PART NUMBER <b>@Model.PARTNUMBER</b> <br />
            PART NAME <b>@Model.PARTNAME</b>
        </div>

        <div class="form-group">
            <label for="txtPartNumber">Barrel Part Number</label>
            <input type="text" class="form-control" id="txtPartNumber">
        </div>
        <div class="form-group">
            <label for="txtSerialNumber">Barrel Serial Number</label>
            <input type="text" class="form-control" id="txtSerialNumber">
        </div>
        <div class="form-group">
            <label for="txtHole">Hole Number</label>
            <input type="text" class="form-control" id="txtHole">
        </div>
        <button type="submit" class="btn btn-primary btn-block" id="btnConfirm">Confirm</button>
    </div>
    <div class="alert alert-success" role="alert">
        <h4 id="result" class="alert-heading">Well done!</h4>
        <hr>
        <p class="mb-1">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
    </div>
    <script>
        $(document).ready(function () {
            $("#txtPartNumber").keydown(function (event) {
                if (event.keyCode == 13) {
                    $("#txtSerialNumber").focus();
                }
            })
            $("#txtSerialNumber").keydown(function (event) {
                if (event.keyCode == 13) {
                    $("#txtHole").focus();
                }
            })
            $("#txtHole").keydown(function (event) {
                if (event.keyCode == 13) {

                }
            })
            $("#btnConfirm").click(function () {
                $.post('@Url.Action("VerifySerial")',
                    {
                        partNumber: $('#txtPartNumber').val(),
                        serialNumber: $('#txtSerialNumber').val(),
                        holeNumber: $('#txtHole').val()
                    },
                    function (data) {
                        if (data.result) {
                            $('div.alert').removeClass('alert-danger').addClass('alert-success')
                            $('#result').html('Well Done!');
                            $('.mb-1').html('Project Arrow Success.<br/><button class="btn btn-primary btn-block" onclick="window.location = \'@Url.Action("Index")\'">OK</button>');
                        }
                        else {
                            $('div.alert').removeClass('alert-success').addClass('alert-danger')
                            $('#result').html('Error!');
                            $('input[type="text"]').val('');
                            $('#txtPartNumber').focus();
                        }
                    })
            })

            function verifyFail() {

            }
        })
    </script>
</body>
</html>
